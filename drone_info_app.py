import streamlit as st

st.set_page_config(page_title="ë“œë¡  ì¶”ì²œ í†µí•© í”„ë¡œê·¸ë¨", layout="wide")
st.title("ğŸ›©ï¸ ë“œë¡  ì˜ˆì‚°/ìˆ˜ì¤€ ê¸°ë°˜ ì¶”ì²œ + ë¹„í–‰ ì›ë¦¬ ì•ˆë‚´")

# -----------------------------
# ì‚¬ìš©ì ìˆ˜ì¤€ ì„ íƒ
# -----------------------------
st.header("ğŸ‘¤ ì‚¬ìš©ì ì´í•´ ìˆ˜ì¤€ì„ ì„ íƒí•˜ì„¸ìš”")

level = st.radio("ë“œë¡ ì— ëŒ€í•´ ì–´ëŠ ì •ë„ ì•Œê³  ê³„ì‹ ê°€ìš”?", ["ì…ë¬¸ì", "ì¤‘ê¸‰ì", "ì „ë¬¸ê°€"])

# -----------------------------
# ì˜ˆì‚° & ë¶„ì•¼ ì…ë ¥
# -----------------------------
st.header("ğŸ” êµ¬ë§¤ ì¡°ê±´ ì…ë ¥")

budget = st.number_input("ğŸ’° ì˜ˆì‚° ì…ë ¥ (â‚©)", min_value=10000, max_value=100000000, value=1000000, step=50000)
category = st.selectbox("ğŸ“Œ ë“œë¡  í™œìš© ë¶„ì•¼ ì„ íƒ", ["ì…ë¬¸/ì—°ìŠµìš©", "ì´¬ì˜", "FPV ë¹„í–‰", "ë†ì—… ë°©ì œ", "êµ¬ì¡°/ì¬ë‚œ", "ë¬¼ë¥˜/ë°°ì†¡"])

# -----------------------------
# ë“œë¡  ë°ì´í„°ì…‹
# -----------------------------
drone_db = [
    {"model": "DJI Mini 4K", "category": "ì…ë¬¸/ì—°ìŠµìš©", "desc": "ì´ˆê²½ëŸ‰, ì…ë¬¸ììš©, 4K ì´¬ì˜", "price": 365000, "level": "ì…ë¬¸ì", "link": "https://store.dji.com/product/dji-mini-2-se"},
    {"model": "Xiaomi E88 Pro", "category": "ì…ë¬¸/ì—°ìŠµìš©", "desc": "ê°€ì„±ë¹„ ì—°ìŠµìš©, HD ì˜ìƒ", "price": 15000, "level": "ì…ë¬¸ì", "link": "https://www.aliexpress.com/item/1005005046354100.html"},
    {"model": "DJI Air 2S", "category": "ì´¬ì˜", "desc": "1ì¸ì¹˜ ì„¼ì„œ, ì¤‘ê¸‰ ì´ìƒ ì˜ìƒ ì´¬ì˜", "price": 891000, "level": "ì¤‘ê¸‰ì", "link": "https://store.dji.com/product/dji-air-2s"},
    {"model": "DJI Avata", "category": "FPV ë¹„í–‰", "desc": "FPV ì „ìš©, ê³ ì† ë¹„í–‰, ê³ ê¸€ ì—°ë™", "price": 1450000, "level": "ì¤‘ê¸‰ì", "link": "https://store.dji.com/product/dji-avata"},
    {"model": "DJI Agras T10", "category": "ë†ì—… ë°©ì œ", "desc": "10L ë°©ì œ, ì‚°ì—…ìš© ë†ì—… ë“œë¡ ", "price": 7000000, "level": "ì „ë¬¸ê°€", "link": "https://www.dji.com/kr/t10"},
    {"model": "DJI Mavic 3 Thermal", "category": "êµ¬ì¡°/ì¬ë‚œ", "desc": "ì—´í™”ìƒ ì„¼ì„œ, êµ¬ì¡° ê°ì‹œìš©", "price": 6000000, "level": "ì „ë¬¸ê°€", "link": "https://www.dji.com/kr/mavic-3-enterprise"},
    {"model": "Zipline Drone", "category": "ë¬¼ë¥˜/ë°°ì†¡", "desc": "ê³ ì •ìµ ê¸°ë°˜ ì¥ê±°ë¦¬ ë°°ì†¡ ë“œë¡ ", "price": 99999999, "level": "ì „ë¬¸ê°€", "link": "https://flyzipline.com"},
]

# -----------------------------
# í•„í„°ë§ ë¡œì§
# -----------------------------
filtered = [
    d for d in drone_db
    if d["category"] == category and d["price"] <= budget and (
        level == "ì…ë¬¸ì" and d["level"] in ["ì…ë¬¸ì"] or
        level == "ì¤‘ê¸‰ì" and d["level"] in ["ì…ë¬¸ì", "ì¤‘ê¸‰ì"] or
        level == "ì „ë¬¸ê°€"
    )
]

# -----------------------------
# ì¶”ì²œ ê²°ê³¼
# -----------------------------
st.header("ğŸ“¦ ì¶”ì²œ ë“œë¡  ê²°ê³¼")
if filtered:
    for d in filtered:
        st.subheader(f"{d['model']} â€” â‚©{d['price']:,}")
        st.write(d["desc"])
        st.markdown(f"[ğŸ”— êµ¬ë§¤ ë§í¬]({d['link']})")
        st.markdown("---")
else:
    st.warning("ì¡°ê±´ì— ë§ëŠ” ë“œë¡ ì´ ì—†ìŠµë‹ˆë‹¤. ì˜ˆì‚°ì„ ëŠ˜ë¦¬ê±°ë‚˜ ë‹¤ë¥¸ ìˆ˜ì¤€ ë˜ëŠ” ë¶„ì•¼ë¥¼ ì„ íƒí•´ë³´ì„¸ìš”.")

# -----------------------------
# ë“œë¡  ì¢…ë¥˜ ì†Œê°œ
# -----------------------------
st.header("ğŸ“š ë“œë¡ ì˜ ì¢…ë¥˜")

with st.expander("ğŸŒ€ ì¿¼ë“œì½¥í„° (Quadcopter)"):
    st.markdown("""
    - 4ê°œì˜ ìˆ˜ì§ í”„ë¡œí ëŸ¬ ì‚¬ìš©  
    - ì •ì§€ë¹„í–‰ ê°€ëŠ¥, ì¡°ì¢… ì‰¬ì›€  
    - ì´¬ì˜Â·ì…ë¬¸Â·ì—°ìŠµìš©ì— ë§ì´ ì‚¬ìš©
    """)

with st.expander("ğŸ›« ê³ ì •ìµ ë“œë¡ "):
    st.markdown("""
    - ë‚ ê°œ í˜•íƒœ, ë¹„í–‰ê¸°ì™€ ìœ ì‚¬  
    - ì¥ê±°ë¦¬ ê³ ì†ë¹„í–‰ì— ì í•©  
    - ë°°ì†¡, ì¸¡ëŸ‰ ë“±ì— ì‚¬ìš©
    """)

with st.expander("ğŸ§¬ í•˜ì´ë¸Œë¦¬ë“œ ë“œë¡ "):
    st.markdown("""
    - ìˆ˜ì§ ì´ì°©ë¥™ + ì¥ê±°ë¦¬ ë¹„í–‰  
    - ê³ ì •ìµ + íšŒì „ìµ í˜¼í•©í˜•  
    - ê³ ê¸‰ ì‚°ì—…ìš©ì—ì„œ ì‚¬ìš©
    """)

# -----------------------------
# ë¹„í–‰ ì›ë¦¬ ì„¤ëª…
# -----------------------------
st.header("âœˆï¸ ë“œë¡  ë¹„í–‰ ì›ë¦¬")

if level == "ì…ë¬¸ì":
    st.markdown("""
    ë“œë¡ ì€ ê³µì¤‘ì—ì„œ **ë– ì˜¤ë¥´ê³ **, **ì•ìœ¼ë¡œ ê°€ê³ **, **íšŒì „**í•©ë‹ˆë‹¤.  
    ì´ê±´ ëª¨ë‘ **í”„ë¡œí ëŸ¬ì˜ ì†ë„ ì¡°ì ˆ**ë¡œ ì´ë£¨ì–´ì ¸ìš”.
    """)
elif level == "ì¤‘ê¸‰ì":
    st.markdown("""
    ë“œë¡ ì€ ë‹¤ìŒê³¼ ê°™ì€ í˜ê³¼ íšŒì „ ì¡°í•©ìœ¼ë¡œ ë¹„í–‰í•©ë‹ˆë‹¤:

    - **Lift** (ì–‘ë ¥): ìœ„ë¡œ ëœ¨ëŠ” í˜  
    - **Thrust** (ì¶”ë ¥): ì•ìœ¼ë¡œ ë‚˜ì•„ê°€ëŠ” í˜  
    - **Pitch**: ì•ë’¤ ê¸°ìš¸ê¸° ì¡°ì ˆ  
    - **Roll**: ì¢Œìš° ê¸°ìš¸ê¸° ì¡°ì ˆ  
    - **Yaw**: ì¢Œìš° íšŒì „ ì¡°ì ˆ
    """)
else:
    st.markdown("""
    ì „ë¬¸ê°€ìš© ì„¤ëª…:

    - ë“œë¡ ì€ **ì¿¼ë“œì½¥í„° êµ¬ì¡°**ë¡œ PID ê¸°ë°˜ ì‹¤ì‹œê°„ ìì„¸ ì œì–´  
    - **Pitch/Roll/Yaw**ëŠ” ê° ì¶• íšŒì „ì— ë”°ë¥¸ ìš´ë™  
    - IMU + GPS ì„¼ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ë¹„í–‰ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì¤‘ì‹¬
    """)

# -----------------------------
# ì‹œê° ìë£Œ
# -----------------------------
st.header("ğŸ–¼ï¸ ë“œë¡  ë¹„í–‰ ë™ì‘ ì´ë¯¸ì§€")
st.markdown("""
<img src="https://upload.wikimedia.org/wikipedia/commons/1/1e/Quadcopter_flight_dynamics.svg" width="700">
<p style="text-align:center;"><i>ì¿¼ë“œì½¥í„°ì˜ Pitch / Roll / Yaw ê°œë…ë„</i></p>
""", unsafe_allow_html=True)

# -----------------------------
# ë¶€ê°€ ì •ë³´
# -----------------------------
with st.expander("ğŸ“‹ ë“œë¡  êµ¬ë§¤/ë¹„í–‰ ì‹œ ìœ ì˜ì‚¬í•­"):
    st.markdown("""
    - 250g ì´ˆê³¼ â†’ **ê¸°ì²´ ë“±ë¡ í•„ìˆ˜**  
    - 2kg ì´ˆê³¼ â†’ **ì¡°ì¢…ì ìê²©ì¦ í•„ìš”**  
    - ì•¼ê°„Â·ë„ì‹¬Â·ë¹„ê°€ì‹œê¶Œ ë¹„í–‰ ì‹œ í—ˆê°€ í•„ìš”
    """)

st.success("âœ… ì¶”ì²œ ë° ì•ˆë‚´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ë” ì•Œê³  ì‹¶ìœ¼ì‹  ê¸°ëŠ¥ì´ ìˆë‹¤ë©´ ìš”ì²­í•´ì£¼ì„¸ìš”.")
